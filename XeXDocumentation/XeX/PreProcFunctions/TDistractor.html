<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of TDistractor</title>
  <meta name="keywords" content="TDistractor">
  <meta name="description" content="This function analyzes files from the line motion paradigm">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html XeX --><!-- menu.html PreProcFunctions -->
<h1>TDistractor
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>This function analyzes files from the line motion paradigm</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function CurrentVariables=LineMotion(Trials,klugestring,UseAx,SacOpts) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">    This function analyzes files from the line motion paradigm
    See also:
    CurrentVariables=LineMotion(Trials,klugestring,UseAx,SacOpts)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../XeX/UtilityFunctions/assorted/attachvars.html" class="code" title="">attachvars</a>	This script evaluates what variables are present in the calling</li><li><a href="../../XeX/UtilityFunctions/assorted/un.html" class="code" title="function X1=un(X)">un</a>	This function takes in a vector (or a matrix) , and returns unique values (or rows). NaNs (and rows with NaNs) are removed.</li><li><a href="../../XeX/UtilityFunctions/gettingAndsettingParameters/DiscretizeMe.html" class="code" title="function DiscretizedX=DiscretizeMe(X,CenterVector)">DiscretizeMe</a>	this function takes in a vector and discretizes it, by finding the closest</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function CurrentVariables=LineMotion(Trials,klugestring,UseAx,SacOpts)</a>
0002 
0003 <span class="comment">%    This function analyzes files from the line motion paradigm</span>
0004 <span class="comment">%    See also:</span>
0005 <span class="comment">%    CurrentVariables=LineMotion(Trials,klugestring,UseAx,SacOpts)</span>
0006 
0007 <span class="comment">% to analyze linemotion</span>
0008 
0009 <span class="comment">%Initializing Variables</span>
0010 
0011 ArrayNumber=nan*ones(1,length(Trials));
0012 GoodTrial=ArrayNumber;
0013 BadTrial=ArrayNumber;
0014 PhotoBad=ArrayNumber;
0015 TrialNumber=1:length(Trials);
0016 RFTrialIndex=ArrayNumber;
0017 
0018 NumRFs=ArrayNumber;
0019 
0020 AbortTrial=ArrayNumber;
0021 FixationBreak=ArrayNumber;
0022 
0023 RewardTime=ArrayNumber;
0024 ErrorTime=ArrayNumber;
0025 ReactionTime=ArrayNumber;
0026 
0027 FPTime=ArrayNumber;
0028 RFOnTime=ArrayNumber;
0029 RFOffTime=ArrayNumber;
0030 RFDur=ArrayNumber;
0031 RFx=ArrayNumber;
0032 RFy=ArrayNumber;
0033 RFPat=ArrayNumber;
0034 RFChecksize=ArrayNumber;
0035 
0036 RF2x=ArrayNumber;
0037 RF2y=ArrayNumber;
0038 RF2OnTime=ArrayNumber;
0039 RF2OffTime=ArrayNumber;
0040 RF2Dur=ArrayNumber;
0041 RF2OnTime=ArrayNumber;
0042 RF2Checksize=ArrayNumber;
0043 RF2Pat=ArrayNumber;
0044 
0045 RFLen=ArrayNumber;
0046 
0047 FPx=RFx;
0048 FPy=RFy;
0049 
0050 <span class="comment">%Trial Types</span>
0051 Dist_at_Targ=ArrayNumber;
0052 Dist_op_Targ=ArrayNumber;
0053 Dist_at_Targ_L=ArrayNumber;
0054 Dist_at_Targ_R=ArrayNumber;
0055 Dist_op_Targ_L=ArrayNumber;
0056 Dist_op_Targ_R=ArrayNumber;
0057 No_dist=ArrayNumber;
0058 No_dist_R=ArrayNumber;
0059 No_dist_L=ArrayNumber;
0060 
0061 
0062 ArrayBak=[];
0063 
0064 MyVariableList={<span class="string">'ArrayNumber'</span>,<span class="string">'GoodTrial'</span>,<span class="string">'BadTrial'</span>,<span class="string">'PhotoBad'</span>,<span class="string">'TrialNumber'</span>,<span class="string">'AbortTrial'</span>,<span class="string">'FixationBreak'</span>,<span class="string">'RewardTime'</span>,<span class="string">'ReactionTime'</span>,<span class="string">'ErrorTime'</span>,<span class="string">'FPTime'</span>,<span class="string">'RFOnTime'</span>,<span class="string">'RFOffTime'</span>,<span class="string">'RFDur'</span>,<span class="string">'RFx'</span>,<span class="string">'RFy'</span>,<span class="string">'RFPat'</span>,<span class="string">'RF2x'</span>,<span class="string">'RF2y'</span>,<span class="string">'RF2OnTime'</span>,<span class="string">'RF2Dur'</span>,<span class="string">'ISI'</span>,<span class="string">'dISI'</span>,<span class="string">'bISI'</span>,<span class="string">'RF2RFD'</span>,<span class="string">'RFLen'</span>,<span class="string">'NumRFs'</span>};
0065 MyResponseVariableList={<span class="string">'GoodTrial'</span>};
0066 
0067  <span class="keyword">for</span> TrialIndex=1:length(Trials)
0068     
0069     CurrentEvents=Trials(TrialIndex).Events;
0070     CurrentCodes=double([CurrentEvents.Code]);
0071     CurrentTimes=double([CurrentEvents.Time]);
0072     
0073     RFTrialIndex(TrialIndex)=TrialIndex;
0074     
0075     is_reward=find(CurrentCodes==1012);
0076     is_error=find(CurrentCodes==1013);
0077     is_fp=find(CurrentCodes==1003);
0078     is_rf=find(CurrentCodes==1007);
0079     is_rfoff=find(CurrentCodes==1010);
0080     is_photobad=find(CurrentCodes==1092);
0081     is_abort=find(CurrentCodes==1090);
0082     is_fixationbreak=find(CurrentCodes==1091);
0083     is_rf2=find(CurrentCodes==1047);
0084     is_rf2off=find(CurrentCodes==1040);
0085     
0086     <span class="keyword">if</span> ~isempty(is_reward), GoodTrial(TrialIndex)=1;
0087     RewardTime(TrialIndex)=CurrentTimes(is_reward(1));
0088     <span class="keyword">elseif</span> ~isempty(is_error),
0089     ErrorTime(TrialIndex)=CurrentTimes(is_error(1));
0090     <span class="keyword">end</span>
0091 
0092     <span class="keyword">if</span> ~isempty(is_fp), FPTime(TrialIndex)=CurrentTimes(is_fp(1));<span class="keyword">end</span>
0093                    
0094     <span class="keyword">if</span> ~isempty(is_fp)
0095         EarlyDrops=find(CurrentCodes&gt;=10700 &amp; abs(CurrentTimes-FPTime(TrialIndex))&lt;=30);  <span class="comment">%within 30ms of FP On</span>
0096         <span class="keyword">if</span> length(EarlyDrops)&gt;=4
0097         FPx(TrialIndex)=(CurrentCodes(EarlyDrops(3))-11000)/10;
0098         FPy(TrialIndex)=(CurrentCodes(EarlyDrops(4))-11000)/10;
0099         <span class="keyword">end</span>
0100         
0101         <span class="keyword">if</span> length(EarlyDrops)&gt;=7 RFLen(TrialIndex)=(CurrentCodes(EarlyDrops(7)))-11000; <span class="keyword">end</span>
0102         
0103     <span class="keyword">end</span>
0104     
0105     
0106     
0107     <span class="keyword">if</span> ~isempty(is_photobad), PhotoBad(TrialIndex)=1;<span class="keyword">end</span>
0108     <span class="keyword">if</span> ~isempty(is_abort) AbortTrial(TrialIndex)=1;<span class="keyword">end</span>
0109     <span class="keyword">if</span> ~isempty(is_fixationbreak) FixationBreak(TrialIndex)=1;<span class="keyword">end</span>
0110     
0111     <span class="keyword">if</span> ~isempty(is_rf), RFOnTime(TrialIndex)=CurrentTimes(is_rf(1));
0112      
0113         FindResult=find(CurrentCodes&gt;=10000 &amp;CurrentCodes&lt;10100 &amp; (CurrentTimes-RFOnTime(TrialIndex))&gt;=0 &amp; (CurrentTimes-RFOnTime(TrialIndex))&lt;=50 ); <span class="comment">%Within 50 ms of RFOn</span>
0114           <span class="keyword">if</span> length(FindResult)&gt;=1
0115               RFChecksize(TrialIndex)=nanmin(CurrentCodes(FindResult)-10000); 
0116           <span class="keyword">end</span>  
0117           
0118           NumRFs(TrialIndex)=length(FindResult);
0119 
0120         FindResult=find(CurrentCodes&gt;=7000 &amp; (CurrentTimes-RFOnTime(TrialIndex))&gt;=0 &amp; (CurrentTimes-RFOnTime(TrialIndex))&lt;=50 ); <span class="comment">%Within 50 ms of RFOn</span>
0121         <span class="keyword">if</span> length(FindResult)&gt;=1
0122             RFPat(TrialIndex)=CurrentCodes(FindResult(1))-7000;
0123         <span class="keyword">end</span>
0124 
0125         FindResult=find(CurrentCodes&gt;=5700 &amp; CurrentCodes&lt;=6800 &amp; (CurrentTimes-RFOnTime(TrialIndex))&gt;=0 &amp; (CurrentTimes-RFOnTime(TrialIndex))&lt;=50 ); <span class="comment">%Within 50 ms of RFOn, max abs coords of 300</span>
0126         <span class="keyword">if</span> length(FindResult)&gt;=2
0127             RFx(TrialIndex)=(CurrentCodes(FindResult(1))-6000)/10;
0128             RFy(TrialIndex)=(CurrentCodes(FindResult(2))-6500)/10;
0129         <span class="keyword">end</span>     
0130         
0131     <span class="keyword">end</span> <span class="comment">%ending the if ~isempty(is_rf) loop</span>
0132 
0133    <span class="keyword">if</span> ~isempty(is_rfoff)
0134     RFOffTime(TrialIndex)=CurrentTimes(is_rfoff(1));
0135    <span class="keyword">end</span>
0136     
0137  <span class="keyword">if</span> ~isempty(is_rf2), RF2OnTime(TrialIndex)=CurrentTimes(is_rf2(1));
0138         
0139       FindResult=find(CurrentCodes&gt;=5700 &amp; CurrentCodes&lt;=6800 &amp; (CurrentTimes-RF2OnTime(TrialIndex))&gt;=0 &amp; (CurrentTimes-RF2OnTime(TrialIndex))&lt;=50 ); <span class="comment">%Within 50 ms of RFOn, max abs coords of 300</span>
0140         <span class="keyword">if</span> length(FindResult)&gt;=2
0141             RF2x(TrialIndex)=(CurrentCodes(FindResult(1))-6000)/10;
0142             RF2y(TrialIndex)=(CurrentCodes(FindResult(2))-6500)/10;
0143         <span class="keyword">end</span>     
0144    
0145          FindResult=find(CurrentCodes&gt;=10000 &amp; (CurrentTimes-RF2OnTime(TrialIndex))&gt;=0 &amp; (CurrentTimes-RF2OnTime(TrialIndex))&lt;=50 ); <span class="comment">%Within 50 ms of RFOn</span>
0146           <span class="keyword">if</span> length(FindResult)&gt;=1
0147               RF2Checksize(TrialIndex)=nanmin(CurrentCodes(FindResult)-10000); 
0148           <span class="keyword">end</span>  
0149 
0150         FindResult=find(CurrentCodes&gt;=7000 &amp; (CurrentTimes-RF2OnTime(TrialIndex))&gt;=0 &amp; (CurrentTimes-RF2OnTime(TrialIndex))&lt;=50 ); <span class="comment">%Within 50 ms of RFOn</span>
0151         <span class="keyword">if</span> length(FindResult)&gt;=1
0152             RF2Pat(TrialIndex)=CurrentCodes(FindResult(1))-7000;
0153         <span class="keyword">end</span>
0154  
0155         <span class="keyword">if</span> ~isempty(is_rf2off), RF2OffTime(TrialIndex)=CurrentTimes(is_rf2off(1));<span class="keyword">end</span>
0156  
0157  <span class="keyword">end</span> <span class="comment">%ending the if ~isempty(is_rf2) loop</span>
0158 
0159 
0160 <span class="keyword">if</span> ~isempty(is_rf) &amp; GoodTrial(TrialIndex)~=1 &amp; AbortTrial(TrialIndex)~=1 &amp; FixationBreak(TrialIndex)~=1
0161     <span class="keyword">if</span> ~isempty(is_error), BadTrial(TrialIndex)=1; 
0162     <span class="keyword">else</span> BadTrial(TrialIndex)=2;<span class="keyword">end</span>
0163 <span class="keyword">end</span>
0164   
0165 <span class="comment">% if isempty(is_rf2)</span>
0166 <span class="comment">%     noRF2ISI(TrialIndex)=RFOnTime(TrialIndex)-1000;</span>
0167 <span class="comment">% end</span>
0168 
0169     <span class="comment">%a little fiddling to take care of oCurrentCodesasions where rex doenst drop an arrya code. details.</span>
0170     <span class="comment">% Verify this IMP</span>
0171     
0172     TemporaryArrayNumber=find(CurrentCodes&gt;=2000&amp;CurrentCodes&lt;=2060);
0173     <span class="keyword">if</span> ~isempty(TemporaryArrayNumber)
0174         <span class="keyword">if</span> length(TemporaryArrayNumber)==1 ArrayNumber(TrialIndex)=CurrentCodes(TemporaryArrayNumber)-2000; ArrayBak=[];
0175         <span class="keyword">elseif</span> length(TemporaryArrayNumber)==2 ArrayNumber(TrialIndex)=CurrentCodes(TemporaryArrayNumber(1))-2000; ArrayBak=CurrentCodes(TemporaryArrayNumber(2))-2000;
0176         <span class="keyword">else</span> ArrayNumber(TrialIndex)=-1; ArrayBak=[];
0177         <span class="keyword">end</span>
0178     <span class="keyword">elseif</span> ~isempty(ArrayBak) ArrayNumber(TrialIndex)=ArrayBak; ArrayBak=[];
0179     <span class="keyword">end</span>
0180  <span class="keyword">if</span> GoodTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;((RFx(TrialIndex)&lt;0&amp;RF2x(TrialIndex)&lt;0)|(RFx(TrialIndex)&gt;0&amp;RF2x(TrialIndex)&gt;0)), Dist_at_Targ(TrialIndex)=1; <span class="keyword">end</span>
0181     <span class="keyword">if</span> GoodTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;((RFx(TrialIndex)&lt;0&amp;RF2x(TrialIndex)&gt;0)|(RFx(TrialIndex)&gt;0&amp;RF2x(TrialIndex)&lt;0)), Dist_op_Targ(TrialIndex)=1; <span class="keyword">end</span>
0182      <span class="keyword">if</span> GoodTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;(RFx(TrialIndex)&gt;0&amp;RF2x(TrialIndex)&gt;0), Dist_at_Targ_R(TrialIndex)=1; <span class="keyword">end</span>
0183     <span class="keyword">if</span> GoodTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;(RFx(TrialIndex)&gt;0&amp;RF2x(TrialIndex)&lt;0), Dist_op_Targ_R(TrialIndex)=1; <span class="keyword">end</span>   
0184     <span class="keyword">if</span> GoodTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;(RFx(TrialIndex)&lt;0&amp;RF2x(TrialIndex)&lt;0), Dist_at_Targ_L(TrialIndex)=1; <span class="keyword">end</span>
0185     <span class="keyword">if</span> GoodTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;(RFx(TrialIndex)&lt;0&amp;RF2x(TrialIndex)&gt;0), Dist_op_Targ_L(TrialIndex)=1; <span class="keyword">end</span>
0186     <span class="keyword">if</span> GoodTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;isnan(RF2x(TrialIndex)), No_dist(TrialIndex)=1; <span class="keyword">end</span>
0187     <span class="keyword">if</span> GoodTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;isnan(RF2x(TrialIndex))&amp;RFx(TrialIndex)&gt;0, No_dist_R(TrialIndex)=1; <span class="keyword">end</span>
0188     <span class="keyword">if</span> GoodTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;isnan(RF2x(TrialIndex))&amp;RFx(TrialIndex)&lt;0, No_dist_L(TrialIndex)=1; <span class="keyword">end</span>
0189     
0190     <span class="keyword">if</span> BadTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;((RFx(TrialIndex)&lt;0&amp;RF2x(TrialIndex)&lt;0)|(RFx(TrialIndex)&gt;0&amp;RF2x(TrialIndex)&gt;0)), Dist_at_Targ(TrialIndex)=0; <span class="keyword">end</span>
0191     <span class="keyword">if</span> BadTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;((RFx(TrialIndex)&lt;0&amp;RF2x(TrialIndex)&gt;0)|(RFx(TrialIndex)&gt;0&amp;RF2x(TrialIndex)&lt;0)), Dist_op_Targ(TrialIndex)=0; <span class="keyword">end</span>
0192      <span class="keyword">if</span> BadTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;(RFx(TrialIndex)&gt;0&amp;RF2x(TrialIndex)&gt;0), Dist_at_Targ_R(TrialIndex)=0; <span class="keyword">end</span>
0193     <span class="keyword">if</span> BadTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;(RFx(TrialIndex)&gt;0&amp;RF2x(TrialIndex)&lt;0), Dist_op_Targ_R(TrialIndex)=0; <span class="keyword">end</span>   
0194     <span class="keyword">if</span> BadTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;(RFx(TrialIndex)&lt;0&amp;RF2x(TrialIndex)&lt;0), Dist_at_Targ_L(TrialIndex)=0; <span class="keyword">end</span>
0195     <span class="keyword">if</span> BadTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;(RFx(TrialIndex)&lt;0&amp;RF2x(TrialIndex)&gt;0), Dist_op_Targ_L(TrialIndex)=0; <span class="keyword">end</span>
0196     <span class="keyword">if</span> BadTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;isnan(RF2x(TrialIndex)), No_dist(TrialIndex)=0; <span class="keyword">end</span>
0197     <span class="keyword">if</span> BadTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;isnan(RF2x(TrialIndex))&amp;RFx(TrialIndex)&gt;0, No_dist_R(TrialIndex)=0; <span class="keyword">end</span>
0198     <span class="keyword">if</span> BadTrial(TrialIndex)==1&amp;PhotoBad(TrialIndex)~=1&amp;isnan(RF2x(TrialIndex))&amp;RFx(TrialIndex)&lt;0, No_dist_L(TrialIndex)=0; <span class="keyword">end</span> 
0199  <span class="keyword">end</span>
0200 
0201 ISI=RFOnTime-RF2OnTime;
0202 dISI=<a href="../../XeX/UtilityFunctions/gettingAndsettingParameters/DiscretizeMe.html" class="code" title="function DiscretizedX=DiscretizeMe(X,CenterVector)">DiscretizeMe</a>(ISI,0:100:1000);
0203 noRF2ISI=RFOnTime(find(isnan(RF2x)))-1000;
0204 bISI=<a href="../../XeX/UtilityFunctions/gettingAndsettingParameters/DiscretizeMe.html" class="code" title="function DiscretizedX=DiscretizeMe(X,CenterVector)">DiscretizeMe</a>(noRF2ISI,0:100:1000);
0205 <span class="comment">% if isnan(ISI)</span>
0206 <span class="comment">%     nISI=RFOnTime-400;</span>
0207 <span class="comment">%     bISI=DiscretizeMe(ISI,0:100:1000);</span>
0208 <span class="comment">% end</span>
0209 dISI(isnan(RF2x))=0;
0210 
0211 FPOnTime=FPTime;
0212  RF2RFD=sqrt( (RF2x-RFx).^2 + (RF2y-RFy).^2 );
0213  RFDur=(RFOffTime-RFOnTime);
0214  RF2Dur=(RF2OffTime-RF2OnTime);
0215  dRFDur=<a href="../../XeX/UtilityFunctions/gettingAndsettingParameters/DiscretizeMe.html" class="code" title="function DiscretizedX=DiscretizeMe(X,CenterVector)">DiscretizeMe</a>(RFDur, 50:100:1000);
0216  dRF2Dur=<a href="../../XeX/UtilityFunctions/gettingAndsettingParameters/DiscretizeMe.html" class="code" title="function DiscretizedX=DiscretizeMe(X,CenterVector)">DiscretizeMe</a>(RF2Dur, 50:100:1000);
0217  
0218  ReactionTime(GoodTrial==1)=RewardTime(GoodTrial==1)-RFOnTime(GoodTrial==1); <span class="comment">%kluge</span>
0219 ReactionTime(BadTrial==1)=ErrorTime(BadTrial==1)-RFOnTime(BadTrial==1);
0220 ReactionTime=ReactionTime-50; <span class="comment">%for bar waiting time, I think 50 is what saproc uses.</span>
0221 <span class="comment">%  PerCor=length(find(GoodTrial==1&amp;PhotoBad~=1))/(length(find(GoodTrial==1&amp;PhotoBad~=1))+length(find(BadTrial==1&amp;PhotoBad~=1)));</span>
0222 <span class="comment">%  UTPerCor=length(find(GoodTrial==1&amp;PhotoBad~=1&amp;RFPat==29))/(length(find(GoodTrial==1&amp;PhotoBad~=1&amp;RFPat==29))+length(find(BadTrial==1&amp;PhotoBad~=1&amp;RFPat==29)));</span>
0223 <span class="comment">%  DTPerCor=length(find(GoodTrial==1&amp;PhotoBad~=1&amp;RFPat==28))/(length(find(GoodTrial==1&amp;PhotoBad~=1&amp;RFPat==28))+length(find(BadTrial==1&amp;PhotoBad~=1&amp;RFPat==28)));</span>
0224 <span class="comment">%  Dist_at_Targ=length(find(</span>
0225  
0226  <span class="comment">%Now printing out details of analysis</span>
0227   summaryString=[ sprintf(<span class="string">'%s\n'</span>,<span class="string">'******************************************************************'</span>)];
0228  summaryString=[summaryString sprintf(<span class="string">'%s\n'</span>,[num2str(length(Trials)) <span class="string">'  trials'</span>])];
0229  summaryString=[summaryString sprintf(<span class="string">'%s\n'</span>,[num2str(length(find(GoodTrial==1))) <span class="string">'  Good Trials'</span>])];
0230  summaryString=[summaryString sprintf(<span class="string">'%s\n'</span>,[num2str(length(find(BadTrial==1))),<span class="string">'  Bad Trials'</span>])];
0231  summaryString=[summaryString sprintf(<span class="string">'%s\n'</span>,[num2str(100*(length(find(GoodTrial==1)))/length(find(GoodTrial==1|BadTrial==1)),<span class="string">'%3.2f'</span>) <span class="string">'  % correct'</span>])];
0232  summaryString=[summaryString sprintf(<span class="string">'%s\n'</span>,<span class="string">'******************************************************************'</span>)];
0233 
0234  RFmat=[RFx;RFy]';
0235 RFmat=<a href="../../XeX/UtilityFunctions/assorted/un.html" class="code" title="function X1=un(X)">un</a>(RFmat);
0236 <span class="keyword">if</span> length(RFmat)&lt;10
0237     summaryString=[summaryString sprintf(<span class="string">'%s\n'</span>,<span class="string">'RFx     RFy'</span>)];
0238     <span class="keyword">for</span> ii=1:size(RFmat,1)
0239         summaryString=[summaryString sprintf(<span class="string">'%s\n'</span>,num2str([RFmat(ii,1) RFmat(ii,2)],<span class="string">'%6.2f'</span>))];
0240     <span class="keyword">end</span>
0241 <span class="keyword">end</span>
0242 
0243  RF2mat=[RF2x;RF2y]';
0244 RF2mat=<a href="../../XeX/UtilityFunctions/assorted/un.html" class="code" title="function X1=un(X)">un</a>(RF2mat);
0245 <span class="keyword">if</span> length(RF2mat)&lt;10
0246     summaryString=[summaryString sprintf(<span class="string">'%s\n'</span>,<span class="string">'RF2x     RF2y'</span>)];
0247     <span class="keyword">for</span> ii=1:size(RF2mat,1)
0248         summaryString=[summaryString sprintf(<span class="string">'%s\n'</span>,num2str([RF2mat(ii,1) RF2mat(ii,2)],<span class="string">'%6.2f'</span>))];
0249     <span class="keyword">end</span>
0250 <span class="keyword">end</span>
0251 
0252 summaryString=[summaryString sprintf(<span class="string">'%s\t'</span>,<span class="string">'Unique ISIS are'</span>)];
0253 summaryString=[summaryString sprintf(<span class="string">'%d\t'</span>,<a href="../../XeX/UtilityFunctions/assorted/un.html" class="code" title="function X1=un(X)">un</a>(dISI))];
0254 summaryString=[summaryString sprintf(<span class="string">'%s\n'</span>,<span class="string">''</span>)];
0255 
0256 <span class="keyword">for</span> printIndex=1:size(RFmat,1)
0257      summaryString=[summaryString sprintf(<span class="string">'%3.1f\t%3.1f\t'</span>,RFmat(printIndex,1),RFmat(printIndex,2))];
0258       summaryString=[summaryString sprintf(<span class="string">'%s\t'</span>,[num2str(100*(length(find(GoodTrial==1&amp;RFx==RFmat(printIndex,1)&amp;RFy==RFmat(printIndex,2)))) / length(find((GoodTrial==1|BadTrial==1) &amp; RFx==RFmat(printIndex,1) &amp; RFy==RFmat(printIndex,2))) ,<span class="string">'%3.2f'</span>)  <span class="string">' % correct'</span>])];
0259 summaryString=[summaryString sprintf(<span class="string">'%s\t'</span>,<span class="string">'All trials  '</span>)];
0260  summaryString=[summaryString sprintf(<span class="string">'%s\t'</span>,[num2str(100*(length(find(GoodTrial==1&amp;RFPat==29&amp;RFx==RFmat(printIndex,1)&amp;RFy==RFmat(printIndex,2)))) / length(find((GoodTrial==1|BadTrial==1) &amp; RFPat==29&amp;RFx==RFmat(printIndex,1) &amp; RFy==RFmat(printIndex,2))) ,<span class="string">'%3.2f'</span>)  <span class="string">' % uT correct'</span>])];
0261   summaryString=[summaryString sprintf(<span class="string">'%s\t'</span>,<span class="string">'/'</span>)];
0262  summaryString=[summaryString sprintf(<span class="string">'%s\n '</span>,[num2str(100*(length(find(GoodTrial==1&amp;RFPat==28&amp;RFx==RFmat(printIndex,1)&amp;RFy==RFmat(printIndex,2)))) / length(find((GoodTrial==1|BadTrial==1) &amp; RFPat==28&amp;RFx==RFmat(printIndex,1) &amp; RFy==RFmat(printIndex,2))) ,<span class="string">'%3.2f'</span>)  <span class="string">' % dT correct'</span>])];
0263 
0264  <span class="keyword">end</span>
0265  summaryString=[summaryString sprintf(<span class="string">'%s\n'</span>,<span class="string">'******************************************************************'</span>)];
0266 
0267 
0268 fprintf(<span class="string">'%s\n'</span>,summaryString);
0269  <a href="../../XeX/UtilityFunctions/assorted/attachvars.html" class="code" title="">attachvars</a>;</pre></div>
<hr><address>Generated on Wed 13-Dec-2006 00:06:54 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2003</address>
</body>
</html>