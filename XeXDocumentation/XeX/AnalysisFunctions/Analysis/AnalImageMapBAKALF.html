<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of AnalImageMapBAKALF</title>
  <meta name="keywords" content="AnalImageMapBAKALF">
  <meta name="description" content="Analtuningcurve is trying to do the population analysis in imagemap form">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<!-- ../../menu.html XeX --><!-- ../menu.html AnalysisFunctions --><!-- menu.html Analysis -->
<h1>AnalImageMapBAKALF
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>Analtuningcurve is trying to do the population analysis in imagemap form</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">Analtuningcurve is trying to do the population analysis in imagemap form</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../XeX/UtilityFunctions/gettingAndsettingParameters/discretizeXes.html" class="code" title="">discretizeXes</a>	</li><li><a href="../../../XeX/UtilityFunctions/main/CountSpikes.html" class="code" title="function [countsmat]=CountSpikes(Trials,indices,alignTimes,xVec,unitCode,AnalogCorrect)">CountSpikes</a>	returns total spike counts for each Trial in a matrix</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">%Analtuningcurve is trying to do the population analysis in imagemap form</span>
0002 
0003 <a href="../../../XeX/UtilityFunctions/gettingAndsettingParameters/discretizeXes.html" class="code" title="">discretizeXes</a>;
0004 
0005 eval([<span class="string">'UniqueX=unique('</span> CurrentXAxisVariableStr <span class="string">'(~isnan('</span> CurrentXAxisVariableStr <span class="string">')));'</span>]);
0006 eval([<span class="string">'UniqueY=unique('</span> CurrentX1AxisVariableStr <span class="string">'(~isnan('</span> CurrentX1AxisVariableStr <span class="string">')));'</span>]);
0007 SpikeCount=nan*ones(length(UniqueY),length(UniqueX));
0008 OverNumTrials=SpikeCount;
0009 
0010 SpikeRate=SpikeCount;
0011 
0012 
0013 
0014 PlotX=YMeasure;
0015 
0016 FilterHere=1;
0017 TotalFilter=FilterHere&amp;CurrentFilterVector;
0018 <span class="keyword">if</span> length(TotalFilter)==1, TotalFilter=logical(ones(1,length(CurrentAlignTime)));<span class="keyword">end</span>;
0019 
0020 <span class="keyword">for</span> Runner=1:length(UniqueX)
0021     CurrentSet=find(CurrentXAxisVariable==UniqueX(Runner) &amp; TotalFilter);
0022     <span class="keyword">for</span> Runner1=1:length(UniqueY)
0023         CurrentSet=find(CurrentYAxisVariable==UniqueY(Runner1) &amp; TotalFilter);
0024         eval([<span class="string">'FindResult=find('</span> CurrentXAxisVariableStr <span class="string">'==UniqueX(Runner) &amp; '</span> CurrentX1AxisVariableStr <span class="string">'== UniqueY(Runner1) &amp;TotalFilter);'</span>]);
0025         eval([<span class="string">'SpikeMat=CountSpikes(Trials,RFTrialIndex(FindResult),'</span> CurrentAlignString <span class="string">'(FindResult),TimeWindowVector,CurrentUnitNumber, CurrentAnalogCorrect);'</span>]); <span class="comment">%keyboard;</span>
0026         SpikeRate(Runner1,Runner)=nanmean(SpikeMat)*1000/(TimeWindowVector(2)-TimeWindowVector(1));
0027         SpikeCount(Runner1,Runner)=nansum(SpikeMat); <span class="comment">%total number of spikes in window across trials</span>
0028         TempCount=nan*SpikeMat;
0029         TempCount(~isnan(SpikeMat))=1;
0030         OverNumTrials(Runner1,Runner)=nansum(TempCount); <span class="comment">%trick to find number of ~isnans</span>
0031         <span class="keyword">if</span> OverNumTrials(Runner1,Runner)==0, SpikeRate(Runner1,Runner)=NaN; SpikeCount(Runner1,Runner)=NaN;<span class="keyword">end</span>
0032     <span class="keyword">end</span>
0033 <span class="keyword">end</span>
0034 BaselineWindowVector=BFR;
0035 ExpNumSpikes= BFR * OverNumTrials * ( TimeWindowVector(2) - TimeWindowVector(1) ) / 1000;
0036 YMat=repmat(UniqueY',1,length(UniqueX));
0037 XMat=repmat(UniqueX,length(UniqueY),1);
0038 
0039 <span class="keyword">end</span>
0040 
0041 
0042 ShiftX=[-40:5:40];
0043 ShiftY=[-40:5:40];
0044 ShiftRFCenter=nan*ones(length(ShiftX),length(ShiftY)); <span class="comment">%center 0,0 will be 11,11</span>
0045 
0046 RFxLocation=XMat(find(XMat==RFxFilt));
0047 RFyLocation=YMat(find(YMat==RFyFilt));
0048 
0049 
0050 <span class="comment">% PlotY=YMeasure;</span>
0051 <span class="comment">% PlotStd=YSem;</span></pre></div>
<hr><address>Generated on Wed 13-Dec-2006 00:06:54 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2003</address>
</body>
</html>