<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of UpdateGObjects</title>
  <meta name="keywords" content="UpdateGObjects">
  <meta name="description" content="this script does the hard work for updateaxis">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<!-- ../../menu.html XeX --><!-- ../menu.html UtilityFunctions --><!-- menu.html update -->
<h1>UpdateGObjects
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>this script does the hard work for updateaxis</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">    this script does the hard work for updateaxis 
    mostly works
    backup still dubious, but not the fault of this script
   UPDATEAXES has been deprecated... THIS WILL NO LONGER BE CALLED !!!!!</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../XeX/UtilityFunctions/assorted/clearvars.html" class="code" title="">clearvars</a>	This function clears all the variables that were recently detached</li><li><a href="../../../XeX/UtilityFunctions/assorted/detachvars.html" class="code" title="">detachvars</a>	This script detaches all the variables from a structure and assigns them</li><li><a href="../../../XeX/UtilityFunctions/gettingAndsettingParameters/MakeTempGraphix.html" class="code" title="">MakeTempGraphix</a>	This scriptlet assembles the TempGraphix structure for saving</li><li><a href="../../../XeX/UtilityFunctions/gettingAndsettingParameters/evalAlignTime.html" class="code" title="">evalAlignTime</a>	</li><li><a href="../../../XeX/UtilityFunctions/gettingAndsettingParameters/getCurrentParameters.html" class="code" title="">getCurrentParameters</a>	This script collects parameters from the GUI.</li><li><a href="../../../XeX/UtilityFunctions/gettingAndsettingParameters/getSavedParameters.html" class="code" title="">getSavedParameters</a>	This scriptlet gets saved parameters from CurrentObjects(ObjectIndex).</li><li><a href="../../../XeX/UtilityFunctions/gettingAndsettingParameters/setAlignTime.html" class="code" title="">setAlignTime</a>	This script sets CurrentAlignString to the correct value, based on the AlignCode obtained from the GUI</li><li><a href="UpdateAxis.html" class="code" title="">UpdateAxis</a>	This script updates current axis with current properties</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../XeX/XeX.html" class="code" title="function varargout = XeX(varargin)">XeX</a>	XEX M-file for XeX.fig</li></ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 
0002 <span class="comment">%    this script does the hard work for updateaxis</span>
0003 <span class="comment">%    mostly works</span>
0004 <span class="comment">%    backup still dubious, but not the fault of this script</span>
0005 <span class="comment">%   UPDATEAXES has been deprecated... THIS WILL NO LONGER BE CALLED !!!!!</span>
0006 
0007 <span class="comment">%************ FINDING CURRENTAXESTOUPDATE ********************************</span>
0008 AxesToUpdateStr=get(handles.UseTheseAxes,<span class="string">'string'</span>);
0009 <span class="keyword">if</span> isempty(AxesToUpdateStr), AxesToUpdateStr=<span class="string">'[]'</span>;<span class="keyword">end</span>
0010 eval([<span class="string">'CurrentAxesToUpdate='</span> AxesToUpdateStr <span class="string">';'</span>]);
0011 
0012 
0013 <span class="comment">%************ GOING TO EACH AXIS AND PICKING UP CURRENT OBJECTS *********</span>
0014 
0015 <span class="keyword">for</span> UpdateIndex=1:length(CurrentAxesToUpdate)
0016     CurrentAxis=CurrentAxesToUpdate(UpdateIndex);
0017     CUStr=num2str(CurrentAxis);
0018         eval([<span class="string">'axes(handles.axes'</span> CUStr <span class="string">');'</span>]);
0019         
0020 <span class="comment">%********** RESETTING AXIS MARKER POINTERS ***********************</span>
0021 
0022 eval([<span class="string">'Axis'</span> CUStr <span class="string">'MarkerPointer=0;'</span>]);
0023     
0024  <span class="comment">%  *****************   getting the current objects</span>
0025 
0026     eval([<span class="string">'if isfield(handles,''A'</span> CUStr <span class="string">'''), CurrentObjects=handles.A'</span> CUStr <span class="string">';else CurrentObjects=[];end'</span>]);  
0027 
0028 <span class="comment">%************ ARE WE HOLDING OR NOT ? **********************************</span>
0029 
0030 CurrentHoldStatus=get(handles.HoldStatus,<span class="string">'value'</span>);
0031     <span class="keyword">if</span>(CurrentHoldStatus~=1), cla; hold off; <span class="keyword">else</span> hold on; <span class="keyword">end</span>
0032     
0033     <span class="keyword">for</span> ObjectIndex=1:length(CurrentObjects)
0034 
0035         <span class="comment">%****************** GETTING SAVED PARAMETERS ***************</span>
0036         
0037         <a href="../../../XeX/UtilityFunctions/gettingAndsettingParameters/getSavedParameters.html" class="code" title="">getSavedParameters</a>;
0038      
0039         <span class="comment">%**************************PICKING UP CURRENT FILTER STRING</span>
0040   
0041      CurrentFilterC=cellstr(get(handles.TrialFilterVector,<span class="string">'string'</span>));
0042   
0043      CurrentFilterString=CurrentFilterC{1};
0044 <span class="comment">%  if get(handles.UseFilters,'value')==0, CurrentFilterString='';end</span>
0045        
0046  <span class="comment">%MOVING OUT OF LOOP: 12/22</span>
0047 <span class="comment">%       for TempVarA=1:9</span>
0048 <span class="comment">%  eval([ 'Axis' num2str(TempVarA) 'MarkerPointer=0;'...</span>
0049 <span class="comment">%  ]);</span>
0050 <span class="comment">%  end</span>
0051 
0052 <span class="comment">%***********ONLY REASON TO REDO GCP IS TO REPLENISH THINGS THAT YOU MAY</span>
0053 <span class="comment">%HAVE INADVRETENTLY CHANGED AFTER LAST CALL</span>
0054 
0055         <a href="../../../XeX/UtilityFunctions/gettingAndsettingParameters/getCurrentParameters.html" class="code" title="">getCurrentParameters</a>;
0056  
0057         <span class="comment">%USEFUL.. MAKE XEX GET MARKER PROPS FROM GUI</span>
0058         
0059  <span class="keyword">if</span> CurrentUseProps==1, <a href="UpdateAxis.html" class="code" title="">UpdateAxis</a>; LocalMarkerString=NextMarker; <span class="keyword">else</span> NextMarker=SavedMarkerString; LocalMarkerString=SavedMarkerString;<span class="keyword">end</span>
0060  
0061 <span class="comment">%use the same data file for axes update. IS SAFE !!!!!!!!!!!!!!!!!!!!!! DO</span>
0062 <span class="comment">%SAME FOR UNDO</span>
0063 
0064 <span class="keyword">try</span>,
0065      eval([<span class="keyword">...</span>
0066         <span class="string">'Trials=handles.'</span> SavedDataFile <span class="string">'.Trials;'</span><span class="keyword">...</span>
0067         <span class="string">'CurrentVariables=handles.'</span> SavedDataFile <span class="string">'.Analysis;'</span><span class="keyword">...</span>
0068         ]);
0069        CurrentDataFile=SavedDataFile;
0070 <span class="keyword">catch</span>,
0071     fprintf(<span class="string">'%s\n'</span>,<span class="string">'I think there is a problem here... You may have deleted a data file with a graph'</span>);
0072 <span class="keyword">end</span>
0073 
0074 <span class="comment">%        if isempty(get(handles.TrialFilterVector,'string')) CurrentFilterString=SavedFilter;end</span>
0075 
0076         CurrentFilterString=SavedFilter;
0077         CurrentSliderValue=SavedSliderValue;
0078         CurrentSelectedVariable=SavedVariable;
0079         CurrentErrorBarType=SavedErrorBarType;
0080     
0081         <span class="keyword">if</span> CurrentBinWidth==0, CurrentBinWidth=SavedBinWidth;<span class="keyword">end</span>
0082         <span class="keyword">if</span> isempty(CurrentStimVector) CurrentStimVector=SavedStimVector; 
0083          XVector=CurrentStimVector(1):CurrentBinWidth:CurrentStimVector(2);
0084  PlotXVector=[(CurrentStimVector(1)+(CurrentBinWidth/2)):CurrentBinWidth:(CurrentStimVector(2)+(CurrentBinWidth/2))];
0085         <span class="keyword">end</span>
0086 
0087         <span class="comment">%         if strcmp(CurrentFilterString,'NA'), end     %removed |strcmp(CurrentFilterString,'1') here</span>
0088         <span class="keyword">if</span> isempty(CurrentRF), CurrentRF=SavedRF; <span class="keyword">end</span>
0089         <span class="keyword">if</span> isempty(TimeWindowVector), TimeWindowVector=SavedTimeWindowVector;<span class="keyword">end</span>
0090         <span class="keyword">if</span> isempty(CurrentUnitNumber), CurrentUnitNumber=SavedUnitNumber;<span class="keyword">end</span>
0091         
0092 <span class="comment">%         if CurrentUseAxisVars~=1</span>
0093 <span class="comment">%</span>
0094 <span class="comment">%***************CHANGED 12/22/2005... This seems to make MORE SENSE *****</span>
0095 
0096         CurrentXAxisCenters=SavedXAxisCentersStr;    
0097         CurrentX1AxisCenters=SavedX1AxisCentersStr;    
0098         CurrentXAxisVariableStr=SavedXAxisVariableStr;
0099         CurrentX1AxisVariableStr=SavedX1AxisVariableStr;
0100          CurrentYAxisVariableStr=SavedYAxisVariableStr;
0101          CurrentXAxisDiscretize=SavedXAxisDiscretize;
0102          CurrentX1AxisDiscretize=SavedX1AxisDiscretize;
0103          CurrentXAxisCentersStr=SavedXAxisCentersStr;
0104          CurrentX1AxisCentersStr=SavedX1AxisCentersStr;
0105          
0106          CurrentPValue=SavedPValue;
0107 <span class="comment">%</span>
0108 <span class="comment">%         end</span>
0109 
0110         <a href="../../../XeX/UtilityFunctions/assorted/detachvars.html" class="code" title="">detachvars</a>;
0111         
0112 <span class="comment">%         discretizeXes; %I think this is OK here... Probably all overkill. Watch out. Same for next two sentences</span>
0113 <span class="comment">%         eval(['CurrentXAxisVariable=' CurrentXAxisVariableStr ';']);</span>
0114 <span class="comment">%         eval(['CurrentX1AxisVariable=' CurrentX1AxisVariableStr ';']);</span>
0115         
0116 
0117 <a href="../../../XeX/UtilityFunctions/gettingAndsettingParameters/setAlignTime.html" class="code" title="">setAlignTime</a>;  <span class="comment">%need to call again so that currentaligntime is set, previous call in getcurrentparameters is not enough</span>
0118 <a href="../../../XeX/UtilityFunctions/gettingAndsettingParameters/evalAlignTime.html" class="code" title="">evalAlignTime</a>;
0119 eval([<span class="string">'CurrentFilterVector='</span> CurrentFilterString <span class="string">';'</span>]); <span class="comment">%this does the current logical filter vector</span>
0120 eval(SavedEvalString); hold on; 
0121 
0122 CurrentPlotType=SavedPlotType;
0123 CurrentDisplayFilterString=CurrentFilterString;
0124 
0125 EvalString=SavedEvalString; <a href="../../../XeX/UtilityFunctions/gettingAndsettingParameters/MakeTempGraphix.html" class="code" title="">MakeTempGraphix</a>;
0126 
0127 NStr=num2str(CurrentAxis);
0128 
0129         <span class="keyword">if</span> CurrentHoldStatus==1    <span class="comment">%now here, evaluate the eval string and set the handles.a1 structure to include the new object</span>
0130 eval([<span class="string">'handles.A'</span> NStr <span class="string">'(length(handles.A'</span> NStr <span class="string">')+1)=TempGraphix;'</span>]);
0131         <span class="keyword">else</span>                                   <span class="comment">%here, evaluate the eval string, and replace the handles.a1(xx) structure with the new graphics object</span>
0132 <span class="comment">%             delete(SavedHandle);  %removes the graphics object from the screen</span>
0133 eval([<span class="string">'handles.A'</span> NStr <span class="string">'(ObjectIndex)=TempGraphix;'</span>]);
0134         <span class="keyword">end</span>
0135         
0136         <a href="../../../XeX/UtilityFunctions/assorted/clearvars.html" class="code" title="">clearvars</a>; <span class="comment">%clear CurrentAlignTime;</span>
0137     <span class="keyword">end</span>  <span class="comment">%ending the current axis loop</span>
0138     
0139 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Wed 13-Dec-2006 00:06:54 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2003</address>
</body>
</html>