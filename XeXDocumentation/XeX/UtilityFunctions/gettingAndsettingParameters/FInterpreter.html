<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of FInterpreter</title>
  <meta name="keywords" content="FInterpreter">
  <meta name="description" content="This script does the filter interpretation; will grow">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<!-- ../../menu.html XeX --><!-- ../menu.html UtilityFunctions --><!-- menu.html gettingAndsettingParameters -->
<h1>FInterpreter
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>This script does the filter interpretation; will grow</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">   This script does the filter interpretation; will grow
   FInterpreter.m</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>	To check if xexparameteres in finterpreter is empty</li><li><a href="../../../XeX/UtilityFunctions/gaingraphs/reset_gainposits.html" class="code" title="">reset_gainposits</a>	This scriptlet is used in to change layouts to say GainGraph or SixGraph</li><li><a href="../../../XeX/UtilityFunctions/gaingraphs/set_gainposits.html" class="code" title="">set_gainposits</a>	This scriptlet is used in to change layouts to say GainGraph or SixGraph</li><li><a href="../../../XeX/UtilityFunctions/handlingGraphics/DoUseProps.html" class="code" title="">DoUseProps</a>	This function makes the UseProps graphics objects visible or invisible based on handles.UseProps</li><li><a href="../../../XeX/UtilityFunctions/handlingGraphics/SwitchAxes.html" class="code" title="">SwitchAxes</a>	This script switches axes based on axis list in GUI</li><li><a href="../../../XeX/UtilityFunctions/handlingGraphics/makeVisible.html" class="code" title="function makeVisible(handleObjects)">makeVisible</a>	To make objects supplied visible</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="GraphCommandProcessor.html" class="code" title="">GraphCommandProcessor</a>	Basically does what Plot data does, but reads in commands from a gfx</li><li><a href="../../../XeX/XeX.html" class="code" title="function varargout = XeX(varargin)">XeX</a>	XEX M-file for XeX.fig</li></ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 
0002 <span class="comment">%   This script does the filter interpretation; will grow</span>
0003 <span class="comment">%   FInterpreter.m</span>
0004 
0005 [XexCommand,XexParameters]=strtok(CurrentFilterString);
0006 RunCode=0;
0007 
0008 <span class="comment">% RUN a command or matlab m-file or whatever !!</span>
0009 
0010 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'RUN'</span>)), 
0011     
0012     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0013     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0014 
0015     RunCode=1;
0016 <span class="comment">%     eval(XexParameters);</span>
0017     PlotOK=0; 
0018     <span class="keyword">return</span>;
0019 <span class="keyword">end</span>
0020 
0021 <span class="comment">% NEW FIGURE</span>
0022 
0023 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'NEWAXIS'</span>)), <a href="../../../XeX/UtilityFunctions/handlingGraphics/SwitchAxes.html" class="code" title="">SwitchAxes</a>; 
0024     fprintf(<span class="string">'%s\n'</span>,<span class="string">'New axis'</span>);
0025     PlotOK=0; 
0026     <span class="keyword">return</span>;
0027 <span class="keyword">end</span>
0028 
0029 <span class="comment">% % VARIABLE CHOICE</span>
0030 <span class="comment">% if (strcmpi(XexCommand,'YVAR')),</span>
0031 <span class="comment">%</span>
0032 <span class="comment">%     EmptyCheck;</span>
0033 <span class="comment">%     if(PlotOK==0), return; end</span>
0034 <span class="comment">%</span>
0035 <span class="comment">%     VarList=cellstr(get(handles.VariablesList,'string'));</span>
0036 <span class="comment">%     findvar=find(strcmp(VarList,XexParameters));</span>
0037 <span class="comment">% %     keyboard;</span>
0038 <span class="comment">%     if ~isempty(findvar),</span>
0039 <span class="comment">%         set(handles.VariablesList,'value',findvar);</span>
0040 <span class="comment">%     end</span>
0041 <span class="comment">%</span>
0042 <span class="comment">%     PlotOK=0;</span>
0043 <span class="comment">%     return;</span>
0044 <span class="comment">% end</span>
0045 
0046 <span class="comment">% Xlabel, Ylabel and Title</span>
0047 
0048 TempAxesHandles=nan*ones(1,handles.NumberOfAxes);
0049 CurrentAxisHandle=gca;
0050 
0051 <span class="keyword">for</span> TempVar=1:(handles.NumberOfAxes)
0052    eval([<span class="string">' TempAxesHandles(TempVar)=handles.axes'</span> num2str(TempVar) <span class="string">';'</span>]);
0053 <span class="keyword">end</span>
0054 
0055 WhichAxis=find(TempAxesHandles==CurrentAxisHandle);
0056 
0057 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'Xlabel'</span>))
0058 
0059     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0060     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0061     
0062     Curxlabel=XexParameters;
0063     xlabel(Curxlabel);
0064     eval([<span class="string">'handles.A'</span> num2str(WhichAxis) <span class="string">'Annotations{2}=Curxlabel; if length(handles.A'</span> num2str(WhichAxis) <span class="string">'Annotations)&lt;3, handles.A'</span> num2str(WhichAxis) <span class="string">'Annotations{3}='''';end'</span>]);
0065     
0066     PlotOK=0;
0067     <span class="keyword">return</span>;
0068 
0069 <span class="keyword">elseif</span> (strcmpi(XexCommand,<span class="string">'Ylabel'</span>))
0070     
0071 <span class="comment">%     [dummyvar,Curylabel]=strtok(CurrentFilterString);</span>
0072     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0073     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0074 
0075     Curylabel=XexParameters;
0076    ylabel(Curylabel);
0077    eval([<span class="string">'handles.A'</span> num2str(WhichAxis) <span class="string">'Annotations{3}=Curylabel;'</span>]);
0078     
0079     PlotOK=0;
0080     <span class="keyword">return</span>;
0081     
0082 <span class="keyword">elseif</span> (strcmpi(XexCommand,<span class="string">'Title'</span>))
0083     
0084 <span class="comment">%     [dummyvar,Curtitle]=strtok(CurrentFilterString);</span>
0085         <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0086     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0087 
0088     Curtitle=XexParameters;
0089     title(Curtitle);
0090    eval([<span class="string">'handles.A'</span> num2str(WhichAxis) <span class="string">'Annotations{1}=Curtitle;'</span>]);
0091    eval([<span class="string">'if length(handles.A'</span> num2str(WhichAxis) <span class="string">'Annotations)&lt;2, handles.A'</span> num2str(WhichAxis) <span class="string">'Annotations{2}='''';end'</span>]);
0092    eval([<span class="string">'if length(handles.A'</span> num2str(WhichAxis) <span class="string">'Annotations)&lt;3, handles.A'</span> num2str(WhichAxis) <span class="string">'Annotations{3}='''';end'</span>]);
0093     
0094     PlotOK=0;
0095     <span class="keyword">return</span>;    
0096 
0097 <span class="keyword">elseif</span> (strcmpi(XexCommand,<span class="string">'Xlim'</span>))
0098     
0099 <span class="comment">%     [dummyvar,Curxlim]=strtok(CurrentFilterString);</span>
0100         <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0101     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0102 Curxlim=XexParameters;
0103     xlim(str2num(Curxlim));
0104     eval([<span class="string">'handles.A'</span> num2str(WhichAxis) <span class="string">'Annotations{4}=Curxlim;'</span>]);
0105     
0106     PlotOK=0;
0107     <span class="keyword">return</span>;    
0108 
0109 <span class="keyword">elseif</span> (strcmpi(XexCommand,<span class="string">'Ylim'</span>))
0110     
0111 <span class="comment">%     [dummyvar,Curylim]=strtok(CurrentFilterString);</span>
0112     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0113     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0114     Curylim=XexParameters;
0115     ylim(Curylim);
0116    eval([<span class="string">'handles.A'</span> num2str(WhichAxis) <span class="string">'Annotations{5}=Curylim;'</span>]);
0117     
0118     PlotOK=0;
0119     <span class="keyword">return</span>;    
0120     
0121 <span class="keyword">end</span>
0122 
0123 <span class="comment">% HOLD ON and HOLD OFF</span>
0124 
0125 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'HOLD'</span>)), 
0126 
0127         <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0128     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0129 
0130     <span class="keyword">if</span> ~isempty(strfind(XexParameters,<span class="string">'OFF'</span>)),
0131            set(handles.HoldStatus,<span class="string">'value'</span>,0);
0132            fprintf(<span class="string">'%s\n'</span>,<span class="string">'HOLD OFF'</span>);
0133     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'ON'</span>)),
0134            set(handles.HoldStatus,<span class="string">'value'</span>,1);
0135            fprintf(<span class="string">'%s\n'</span>,<span class="string">'HOLD ON'</span>);
0136     <span class="keyword">end</span>
0137     
0138     PlotOK=0;
0139     <span class="keyword">return</span>;
0140     
0141 <span class="keyword">end</span>
0142 
0143 <span class="comment">% COLORS ON AND OFF</span>
0144 
0145 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'COLORS'</span>)), 
0146 
0147         <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0148     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0149 
0150     <span class="keyword">if</span> ~isempty(strfind(XexParameters,<span class="string">'OFF'</span>)),
0151            set(handles.UseProps,<span class="string">'value'</span>,0);
0152            fprintf(<span class="string">'%s\n'</span>,<span class="string">'COLORS OFF'</span>);
0153     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'ON'</span>)),
0154            set(handles.UseProps,<span class="string">'value'</span>,1);
0155            fprintf(<span class="string">'%s\n'</span>,<span class="string">'COLORS ON'</span>);
0156     <span class="keyword">end</span>
0157     
0158     <a href="../../../XeX/UtilityFunctions/handlingGraphics/DoUseProps.html" class="code" title="">DoUseProps</a>;
0159     
0160     PlotOK=0;
0161     <span class="keyword">return</span>;
0162     
0163 <span class="keyword">end</span>
0164 
0165 <span class="comment">% CB ON and CB OFF</span>
0166 
0167 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'CB'</span>)), 
0168 
0169     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0170     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0171    
0172     <span class="keyword">if</span> ~isempty(strfind(XexParameters,<span class="string">'OFF'</span>)),
0173            set(handles.PlotCB,<span class="string">'checked'</span>,<span class="string">'off'</span>);
0174            fprintf(<span class="string">'%s\n'</span>,<span class="string">'CB OFF'</span>);
0175     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'ON'</span>)),
0176            set(handles.PlotCB,<span class="string">'checked'</span>,<span class="string">'on'</span>);
0177            fprintf(<span class="string">'%s\n'</span>,<span class="string">'CB ON'</span>);
0178     <span class="keyword">end</span>
0179     
0180     PlotOK=0;
0181     <span class="keyword">return</span>;
0182     
0183 <span class="keyword">end</span>
0184 
0185 <span class="comment">% SIG ON and SIG OFF</span>
0186 
0187 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'SIG'</span>)), 
0188 
0189     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0190     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0191    
0192     <span class="keyword">if</span> ~isempty(strfind(XexParameters,<span class="string">'OFF'</span>)),
0193            set(handles.PlotSig,<span class="string">'checked'</span>,<span class="string">'off'</span>);
0194            fprintf(<span class="string">'%s\n'</span>,<span class="string">'SIG OFF'</span>);
0195     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'ON'</span>)),
0196            set(handles.PlotSig,<span class="string">'checked'</span>,<span class="string">'on'</span>);
0197            fprintf(<span class="string">'%s\n'</span>,<span class="string">'SIG ON'</span>);
0198     <span class="keyword">end</span>
0199     
0200     PlotOK=0;
0201     <span class="keyword">return</span>;
0202     
0203 <span class="keyword">end</span>
0204 
0205 <span class="comment">% CLEAR</span>
0206 
0207 <span class="keyword">if</span> strcmpi(XexCommand,<span class="string">'CLEAR'</span>),
0208     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0209     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0210 
0211     <span class="keyword">if</span> ~strcmpi(XexParameters,<span class="string">'ALL'</span>),
0212         
0213     ClearAxList=str2num(XexParameters);
0214 
0215     <span class="keyword">if</span> min(ClearAxList)&lt;0 , ClearAxList(ClearAxList&lt;0)=0;<span class="keyword">end</span>
0216     <span class="keyword">if</span> max(ClearAxList)&gt;handles.NumberOfAxes, ClearAxList(ClearAxList&gt;handles.NumberOfAxes)=handles.NumberOfAxes;<span class="keyword">end</span>
0217     
0218 <span class="keyword">for</span> TempVar=ClearAxList
0219     eval([<span class="string">'axes(handles.axes'</span> num2str(TempVar) <span class="string">');'</span>]);
0220     cla; hold off;
0221 eval([<span class="string">'if isfield(handles,''A'</span> num2str(TempVar) <span class="string">'''), handles=rmfield(handles,''A'</span> num2str(TempVar) <span class="string">''');end'</span>]);
0222 <span class="keyword">end</span>
0223 
0224     <span class="keyword">else</span> 
0225         
0226         <span class="keyword">for</span> TempVar=1:(handles.NumberOfAxes)
0227     eval([<span class="string">'axes(handles.axes'</span> num2str(TempVar) <span class="string">');'</span>]);
0228     cla; hold off;
0229 eval([<span class="string">'if isfield(handles,''A'</span> num2str(TempVar) <span class="string">'''), handles=rmfield(handles,''A'</span> num2str(TempVar) <span class="string">''');end'</span>]);
0230 <span class="keyword">end</span>
0231         
0232     <span class="keyword">end</span>
0233     
0234     PlotOK=0; <span class="keyword">return</span>;
0235 
0236 <span class="keyword">end</span>
0237 
0238 <span class="comment">% CIRCLEGRAPH ON AND OFF</span>
0239 
0240 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'CIRCLEGRAPH'</span>)), 
0241    
0242         <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0243     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0244 
0245     <span class="keyword">if</span> ~isempty(strfind(XexParameters,<span class="string">'ON'</span>))
0246     
0247     set(handles.GainGraph,<span class="string">'checked'</span>,<span class="string">'on'</span>);
0248     
0249     <span class="keyword">if</span> strcmp(get(handles.SixGraph,<span class="string">'Checked'</span>),<span class="string">'on'</span>),
0250         set(handles.SixGraph,<span class="string">'checked'</span>,<span class="string">'off'</span>);
0251         <a href="../../../XeX/UtilityFunctions/handlingGraphics/makeVisible.html" class="code" title="function makeVisible(handleObjects)">makeVisible</a>([handles.axes7 handles.axes8 handles.axes9]);
0252     <span class="keyword">end</span>
0253     
0254          <a href="../../../XeX/UtilityFunctions/gaingraphs/set_gainposits.html" class="code" title="">set_gainposits</a>;
0255          fprintf(<span class="string">'%s\n'</span>,<span class="string">'CIRCLEGRAPH ON'</span>);
0256          PlotOK=0;
0257          <span class="keyword">return</span>;
0258     
0259     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'OFF'</span>)), 
0260    
0261     set(handles.GainGraph,<span class="string">'checked'</span>,<span class="string">'off'</span>);
0262     <a href="../../../XeX/UtilityFunctions/gaingraphs/reset_gainposits.html" class="code" title="">reset_gainposits</a>;
0263     <a href="../../../XeX/UtilityFunctions/handlingGraphics/makeVisible.html" class="code" title="function makeVisible(handleObjects)">makeVisible</a>([handles.Axis7Indicator handles.Axis8Indicator handles.Axis9Indicator]);
0264     
0265     PlotOK=0;
0266     fprintf(<span class="string">'%s\n'</span>,<span class="string">'CIRCLEGRAPH OFF'</span>);
0267     <span class="keyword">return</span>;
0268     
0269     <span class="keyword">end</span>
0270     
0271 <span class="keyword">end</span>
0272 
0273 <span class="comment">% ALIGN CODE</span>
0274 
0275 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'ALIGN'</span>)),
0276     
0277         <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0278     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0279 
0280     <span class="keyword">if</span> ~isempty(strfind(XexParameters,<span class="string">'RF1'</span>)) CurrentAlignString=<span class="string">'RFOnTime'</span>;
0281    
0282             AlignCodeList=get(handles.AlignCode,<span class="string">'string'</span>);
0283             findrf= find(strcmp(AlignCodeList,<span class="string">'RF1'</span>));
0284             <span class="keyword">if</span> ~isempty(findrf), set(handles.AlignCode,<span class="string">'value'</span>,findrf);<span class="keyword">end</span>
0285 
0286     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'SAC1'</span>)) CurrentAlignString=<span class="string">'SacAlignTime1'</span>;
0287             AlignCodeList=get(handles.AlignCode,<span class="string">'string'</span>);
0288             findsac1= find(strcmp(AlignCodeList,<span class="string">'SacTime1'</span>));
0289             <span class="keyword">if</span> ~isempty(findsac1), set(handles.AlignCode,<span class="string">'value'</span>,findsac1);<span class="keyword">end</span>
0290             
0291     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'RF2'</span>)) CurrentAlignString=<span class="string">'RF2OnTime'</span>;
0292             AlignCodeList=get(handles.AlignCode,<span class="string">'string'</span>);
0293             findrf2= find(strcmp(AlignCodeList,<span class="string">'RF2'</span>));
0294             <span class="keyword">if</span> ~isempty(findrf2), set(handles.AlignCode,<span class="string">'value'</span>,findrf2);<span class="keyword">end</span>
0295 
0296     <span class="keyword">end</span>
0297     
0298     PlotOK=0;
0299     
0300     fprintf(<span class="string">'%s\n'</span>,[<span class="string">'Aligned to '</span> CurrentAlignString]);
0301     <span class="keyword">return</span>;
0302     
0303 <span class="keyword">end</span>
0304 
0305 <span class="comment">% PLOT TYPE</span>
0306 
0307 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'PLOTTYPE'</span>)),
0308     
0309         <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0310     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0311 
0312     <span class="keyword">if</span> ~isempty(strfind(XexParameters,<span class="string">'IMAGE'</span>)) CurrentPlottingFile=<span class="string">'ImageMap.m'</span>;
0313     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'CIRCLE'</span>)) CurrentPlottingFile=<span class="string">'CircleMap.m'</span>;
0314     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'SPIKEDENSITY'</span>)) CurrentPlottingFile=<span class="string">'SpikeDensity.m'</span>;
0315     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'TUNINGCURVE'</span>)) CurrentPlottingFile=<span class="string">'DrawTuningCurve.m'</span>;
0316     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'ANGULAR'</span>)) CurrentPlottingFile=<span class="string">'AngularTuningCurve.m'</span>;
0317     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'HIST'</span>)) CurrentPlottingFile=<span class="string">'MakeHist.m'</span>;
0318     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'DISCHIST'</span>)) CurrentPlottingFile=<span class="string">'DiscHist.m'</span>;
0319     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'PSTH'</span>)) CurrentPlottingFile=<span class="string">'DrawPSTH.m'</span>;
0320     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'RASTER'</span>)) CurrentPlottingFile=<span class="string">'DrawRasters.m'</span>;
0321     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'ISI'</span>)) CurrentPlottingFile=<span class="string">'ISIH.m'</span>;
0322     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'KDE'</span>)) CurrentPlottingFile=<span class="string">'DrawKDE.m'</span>;
0323     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'SCATTER'</span>)), CurrentPlottingFile=<span class="string">'PlotScatter.m'</span>;
0324     <span class="keyword">else</span> CurrentPlottingFile=<span class="string">'DrawPSTH.m'</span>; fprintf(<span class="string">'%s\n '</span>,[XexParameters <span class="string">'  is an invalid plotting file; changed to DrawPSTH.m'</span>]);
0325     <span class="keyword">end</span>
0326     
0327     <span class="comment">% ensures that PLOTTYPE just needs to be called once, and then resets current</span>
0328     <span class="comment">% plotting file until next call of PLOTTYPE</span>
0329     
0330     PlottingFileList=get(handles.PlottingFileList,<span class="string">'string'</span>);
0331     findPlotFile=find(strcmp(PlottingFileList,CurrentPlottingFile));
0332     <span class="keyword">if</span> ~isempty(findPlotFile), set(handles.PlottingFileList,<span class="string">'value'</span>,findPlotFile);<span class="keyword">end</span>
0333     
0334     PlotOK=0;
0335     
0336 <span class="comment">%     getCurrentparameters; % not needed cos now doing it in xex plotdata</span>
0337                                               <span class="comment">%%     and in graphcommand processor</span>
0338     
0339     fprintf(<span class="string">'%s\n'</span>,[<span class="string">'Plotting File is now '</span> CurrentPlottingFile]);
0340 
0341     <span class="keyword">return</span>;
0342     
0343 <span class="keyword">end</span>
0344 
0345 <span class="comment">% Time window string</span>
0346 
0347 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'WINDOW'</span>)), 
0348     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0349     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0350     set(handles.StimulusAlignedTimeVector,<span class="string">'string'</span>,XexParameters);    
0351     PlotOK=0;
0352     <span class="keyword">return</span>;
0353 <span class="keyword">end</span>
0354 
0355 <span class="comment">% XAxis variable, Yaxis variable, etc etc</span>
0356 
0357 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'XAXISVAR'</span>)),
0358     
0359     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0360     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0361 
0362     VarList=cellstr(get(handles.XAxisVariable,<span class="string">'string'</span>));
0363     findvar=find(strcmp(VarList,XexParameters));
0364 <span class="comment">%     keyboard;</span>
0365     <span class="keyword">if</span> ~isempty(findvar),
0366         set(handles.XAxisVariable,<span class="string">'value'</span>,findvar);
0367     <span class="keyword">else</span> fprintf(<span class="string">'%s\n'</span>,<span class="string">'Could not set XAxisVariable'</span>);
0368     <span class="keyword">end</span>
0369     
0370     PlotOK=0;
0371     <span class="keyword">return</span>;
0372 <span class="keyword">end</span>
0373 
0374 
0375 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'X1AXISVAR'</span>)),
0376     
0377     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0378     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0379 
0380     VarList=cellstr(get(handles.X1AxisVariable,<span class="string">'string'</span>));
0381     findvar=find(strcmp(VarList,XexParameters));
0382 <span class="comment">%     keyboard;</span>
0383     <span class="keyword">if</span> ~isempty(findvar),
0384         set(handles.X1AxisVariable,<span class="string">'value'</span>,findvar);
0385     <span class="keyword">else</span> fprintf(<span class="string">'%s\n'</span>,<span class="string">'Could not set X1AxisVariable'</span>);
0386     <span class="keyword">end</span>
0387     
0388     PlotOK=0;
0389     <span class="keyword">return</span>;
0390 <span class="keyword">end</span>
0391 
0392 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'XAXISDISCRETIZE'</span>)), 
0393     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0394     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0395     
0396     <span class="keyword">if</span> ~isempty(strfind(XexParameters,<span class="string">'ON'</span>)),
0397         set(handles.XAxisDiscretize,<span class="string">'value'</span>,1);
0398     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'OFF'</span>)),
0399         set(handles.XAxisDiscretize,<span class="string">'value'</span>,0);
0400     <span class="keyword">end</span>
0401         PlotOK=0;
0402         <span class="keyword">return</span>;
0403 <span class="keyword">end</span>
0404 
0405 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'X1AXISDISCRETIZE'</span>)), 
0406     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0407     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0408     
0409     <span class="keyword">if</span> ~isempty(strfind(XexParameters,<span class="string">'ON'</span>)),
0410         set(handles.X1AxisDiscretize,<span class="string">'value'</span>,1);
0411     <span class="keyword">elseif</span> ~isempty(strfind(XexParameters,<span class="string">'OFF'</span>)),
0412         set(handles.X1AxisDiscretize,<span class="string">'value'</span>,0);
0413     <span class="keyword">end</span>
0414         PlotOK=0;
0415         <span class="keyword">return</span>;
0416 <span class="keyword">end</span>
0417 
0418 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'XAXISCENTERS'</span>)), 
0419     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0420     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0421     set(handles.XAxisCenters,<span class="string">'string'</span>,XexParameters);
0422     PlotOK=0;
0423     <span class="keyword">return</span>;
0424 <span class="keyword">end</span>
0425 
0426 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'X1AXISCENTERS'</span>)), 
0427     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0428     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0429     set(handles.X1AxisCenters,<span class="string">'string'</span>,XexParameters);
0430     PlotOK=0;
0431     <span class="keyword">return</span>;
0432 <span class="keyword">end</span>
0433 
0434 
0435 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'YAXISVAR'</span>)),
0436     
0437     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0438     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0439 
0440     VarList=cellstr(get(handles.YAxisVariable,<span class="string">'string'</span>));
0441     findvar=find(strcmp(VarList,XexParameters));
0442 <span class="comment">%     keyboard;</span>
0443     <span class="keyword">if</span> ~isempty(findvar),
0444         set(handles.YAxisVariable,<span class="string">'value'</span>,findvar);
0445     <span class="keyword">else</span> fprintf(<span class="string">'%s\n'</span>,<span class="string">'Could not set YAxisVariable'</span>);
0446     <span class="keyword">end</span>
0447     
0448     PlotOK=0;
0449     <span class="keyword">return</span>;
0450 <span class="keyword">end</span>
0451 
0452 <span class="comment">% BINWIDTH</span>
0453 
0454 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'BINWIDTH'</span>)), 
0455     <a href="../../../XeX/UtilityFunctions/assorted/EmptyCheck.html" class="code" title="">EmptyCheck</a>;
0456     <span class="keyword">if</span>(PlotOK==0), <span class="keyword">return</span>; <span class="keyword">end</span>
0457     
0458     CurBW=str2num(XexParameters);
0459     <span class="keyword">if</span> CurBW&gt;=0 &amp;&amp; CurBW&lt;=100
0460     set(handles.BinWidth,<span class="string">'value'</span>,CurBW);
0461     <span class="keyword">end</span>
0462     
0463     PlotOK=0;
0464     <span class="keyword">return</span>;
0465 <span class="keyword">end</span>
0466 
0467 <span class="comment">%BaseRate</span>
0468 
0469 <span class="keyword">if</span> (strcmpi(XexCommand,<span class="string">'SETBASERATE'</span>)), 
0470 
0471     <span class="keyword">if</span> (exist(<span class="string">'FilterStringList'</span>,<span class="string">'var'</span>)&amp;&amp;length(FilterStringList)&gt;1)||(exist(<span class="string">'CurrentGCommands'</span>,<span class="string">'var'</span>)&amp;&amp;length(CurrentGCommands)&gt;1)
0472     
0473 <span class="comment">%     EmptyCheck;</span>
0474 <span class="comment">%     if(PlotOK==0), return; end</span>
0475     
0476     NextCommandSetBaseRate=1;
0477     PlotOK=0;
0478     <span class="keyword">return</span>;
0479 
0480     <span class="keyword">else</span> fprintf(<span class="string">'%s\n'</span>,<span class="string">'Need a following filter. Ignoring SETBASERATE'</span>);
0481             PlotOK=0;
0482     <span class="keyword">return</span>;
0483     <span class="keyword">end</span>
0484 
0485 <span class="keyword">elseif</span> (strcmpi(XexCommand,<span class="string">'CLEARBASERATE'</span>)), 
0486 
0487 <span class="comment">%     EmptyCheck;</span>
0488 
0489 handles.BaselineFiringRate=NaN;
0490 PlotOK=0;
0491 fprintf(<span class="string">'%s\n'</span>,<span class="string">'Cleared Baseline Firing Rate'</span>);
0492     <span class="keyword">return</span>;
0493 
0494 <span class="keyword">end</span>
0495 
0496 <span class="comment">% FILTER</span>
0497 
0498 
0499 
0500 <span class="comment">% MARKER ETC</span>
0501 
0502 
0503 <span class="comment">% MAKE PLOT % if existing filter is</span>
0504 <span class="comment">% % empty, then set it to 1 or something like that</span>
0505 
0506 
0507 
0508 
0509 
0510 
0511 <span class="comment">% CurrentDataFile</span>
0512 <span class="comment">% CurrentPlotLatency</span>
0513 <span class="comment">% CurrentLatInit</span>
0514 <span class="comment">% CurrentUseProps</span>
0515 <span class="comment">% CurrentAnalogCorrect</span>
0516 <span class="comment">% CurrentUnitNumber</span>
0517 <span class="comment">% CurrentRF</span>
0518 <span class="comment">% CurrentBinWidth</span>
0519 <span class="comment">% CurrentSliderValue</span></pre></div>
<hr><address>Generated on Wed 13-Dec-2006 00:06:54 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2003</address>
</body>
</html>